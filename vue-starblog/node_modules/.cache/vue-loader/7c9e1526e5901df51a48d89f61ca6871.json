{"remainingRequest":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\category\\Category.vue?vue&type=style&index=0&id=f5273ef4&scoped=true&lang=css&","dependencies":[{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\category\\Category.vue","mtime":1672399210834},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\css-loader\\dist\\cjs.js","mtime":1672420949353},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1672420953476},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\postcss-loader\\src\\index.js","mtime":1672420950940},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672420947809},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js","mtime":1672420951796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29udGFpbmVyLXNlbGYgewogIGJveC1zaGFkb3c6IDAgMnB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICB3aWR0aDogMTAwJTsKICBib3JkZXItcmFkaXVzOiA2cHg7Cn0KCi5mb3JtLWhlYWRlciB7CiAgcGFkZGluZzogMTJweCAzMHB4OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDBkMGQwOwp9CgouZm9ybS1ib2R5IHsKICBwYWRkaW5nOiAyMHB4IDMwcHggNDBweCAzMHB4Owp9CgoucFRleHQgewogIG1hcmdpbjogMjVweCAwcHg7CiAgZm9udC1zaXplOiAxNHB4Owp9Cgouc2VsZWN0LXNlbGYgewogIG1hcmdpbi1sZWZ0OiAzMHB4OwogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTUwcHg7Cn0K"},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4RA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/view/manage/category","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"container\" style=\"padding: 15px 30px\">\r\n        <div class=\"handle-box\">\r\n          <el-row  style=\"margin-bottom: 15px;width: 100%\">\r\n            <el-switch\r\n                    v-if=\"this.$store.getters.isAdmin\"\r\n                    v-model=\"enableAdmin\"\r\n                    style=\"display: inline-block;font-size: 12px;float: right\"\r\n                    active-text=\"开启管理员模式\"\r\n                    active-color=\"#13ce66\"\r\n                    inactive-color=\"#d5dce6\"\r\n                    @change=\"getCategories\"\r\n            >\r\n            </el-switch>\r\n          </el-row>\r\n\r\n          <el-row :gutter=\"15\">\r\n            <el-col :xs=\"8\" :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n              <div class=\"container-self\">\r\n                <div class=\"form-header\">\r\n                  <p>添加分类</p>\r\n                </div>\r\n                <div class=\"form-body\">\r\n                  <p class=\"pText\">名称*：</p>\r\n                  <el-input class=\"input-d mr\" v-model=\"categoryName\" placeholder=\"请输入分类名称\"></el-input>\r\n\r\n\r\n                  <p class=\"pText\">描述：</p>\r\n                  <el-input\r\n                          type=\"textarea\"\r\n                          :rows=\"5\"\r\n                          placeholder=\"请输入描述信息\"\r\n                          v-model=\"categoryDescribe\"\r\n                          maxlength=\"150\"\r\n                          show-word-limit\r\n                  >\r\n                  </el-input>\r\n                  <div style=\"margin-top: 20px\">\r\n                    <div v-if=!edit>\r\n                      <el-button type=\"primary\" @click=\"handleSave()\">保存</el-button>\r\n                    </div>\r\n                    <div v-else>\r\n                      <el-button type=\"primary\" @click=\"handleSave()\">更新</el-button>\r\n                      <el-button type=\"info\" plain @click=\"handleCancer\">取消修改</el-button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-col>\r\n            <el-col :xs=\"16\" :sm=\"16\" :md=\"16\" :lg=\"16\" :xl=\"16\">\r\n              <div class=\"container-self\">\r\n                <div class=\"form-header\">\r\n                  <p style=\"display: inline-block\">分类列表\r\n                    <el-select @change=\"changeStatus\" v-model=\"query.status\" placeholder=\"文章位置\" class=\"select-self\">\r\n                      <el-option key=\"-1\" label=\"全部文章\" :value=\"-1\"></el-option>\r\n                      <el-option key=\"1\" label=\"已发布\" :value=\"1\"></el-option>\r\n                      <el-option key=\"0\" label=\"回收站\" :value=\"0\"></el-option>\r\n                      <el-option key=\"2\" label=\"草稿箱\" :value=\"2\"></el-option>\r\n                    </el-select>\r\n                  </p>\r\n                  <el-button type=\"info\" plain @click=\"handleClear\" style=\"margin-left: 10px\" >重置</el-button>\r\n                </div>\r\n                <div class=\"form-body\">\r\n                  <el-table\r\n                          v-loading=\"loading\"\r\n                          :data=\"categories\"\r\n                          border\r\n                          class=\"table\"\r\n                          ref=\"multipleTable\"\r\n                          header-cell-class-name=\"table-header\"\r\n                  >\r\n                    <el-table-column prop=\"categoryName\" label=\"类名\" align=\"center\"></el-table-column>\r\n                    <el-table-column label=\"文章数\" align=\"center\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-tag type=\"warning\"\r\n                        >\r\n                          {{scope.row.articleNums}}\r\n                        </el-tag>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column v-if=\"enableAdmin\" label=\"所属用户\" align=\"center\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-tooltip effect=\"light\" placement=\"right-end\">\r\n                          <div slot=\"content\">UID:{{scope.row.userId}}\r\n                          </div>\r\n                          <el-button\r\n                                  type=\"text\"\r\n                                  icon=\"el-icon-user\"\r\n                                  size=\"mini\"\r\n                                  style=\"color: #6ffcff\"\r\n                                  @click=\"selectByUserId(scope.row.userId)\"\r\n                          >{{scope.row.nickname}}\r\n                          </el-button>\r\n                        </el-tooltip>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"categoryDescribe\" label=\"描述\" align=\"center\"></el-table-column>\r\n                    <el-table-column label=\"操作\" width=\"180\" align=\"center\">\r\n                      <template slot-scope=\"scope\">\r\n                        <el-button\r\n                                type=\"text\"\r\n                                icon=\"el-icon-edit\"\r\n                                @click=\"handleEdit(scope.$index, scope.row)\"\r\n                        >修改\r\n                        </el-button>\r\n                        <el-button\r\n                                v-if=\"query.status == -1 && scope.row.articleNums == 0\"\r\n                                type=\"text\"\r\n                                icon=\"el-icon-delete\"\r\n                                style=\"color: red\"\r\n                                @click=\"handleDelete(scope.$index, scope.row)\"\r\n                        >删除\r\n                        </el-button>\r\n                      </template>\r\n                    </el-table-column>\r\n                  </el-table>\r\n                  <div class=\"pagination\">\r\n                    <el-pagination\r\n                            background\r\n                            layout=\"total, prev, pager, next\"\r\n                            :current-page=\"query.curPage\"\r\n                            :page-size=\"query.pageSize\"\r\n                            :total=\"pageTotal\"\r\n                            @current-change=\"handlePageChange\"\r\n                    ></el-pagination>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { deleteRequest, getRequest, postRequest, putRequest } from '@/axios';\r\n\r\n  export default {\r\n    name: 'Category',\r\n    data() {\r\n      return {\r\n        categoryId: -1,\r\n        categoryName: '',\r\n        categoryDescribe: '',\r\n\r\n        categories: [],\r\n\r\n        query: {\r\n          curPage: 1,\r\n          pageSize: 10,\r\n          status: -1\r\n        },\r\n\r\n        pageTotal: -1,\r\n\r\n        loading: false,\r\n        edit: false,\r\n\r\n        enableAdmin: false,\r\n        adminSelectUserId : -1\r\n      };\r\n    },\r\n\r\n    created() {\r\n      this.getCategories();\r\n    },\r\n\r\n    methods: {\r\n      getCategories() {\r\n        this.loading = true;\r\n        getRequest(this.enableAdmin ? '/admin/all/category/?userId='+ this.adminSelectUserId + '&':'/category/all', this.query).then(resp => {\r\n          if (resp.status == 200) {\r\n            this.loading = false;\r\n            this.categories = resp.data.list;\r\n            this.pageTotal = resp.data.total;\r\n          } else {\r\n            this.loading = false;\r\n          }\r\n        }, resp => {\r\n          this.loading = false;\r\n        }).catch(err => {\r\n          this.loading = false;\r\n        });\r\n      },\r\n\r\n      selectByUserId(userId) {\r\n        this.adminSelectUserId = userId;\r\n        this.getCategories();\r\n      },\r\n\r\n      handleClear() {\r\n        this.query.curPage = 1;\r\n        this.query.status = -1;\r\n        this.adminSelectUserId = -1;\r\n        this.getCategories();\r\n      },\r\n\r\n      changeStatus() {\r\n        this.query.curPage = 1;\r\n        this.getCategories();\r\n      },\r\n\r\n      handlePageChange(val) {\r\n        this.$set(this.query, 'curPage', val);\r\n        this.getCategories();\r\n      },\r\n\r\n      handleSave() {\r\n        if (this.categoryId != -1) {\r\n          putRequest('/category/', {\r\n            categoryId: this.categoryId,\r\n            categoryName: this.categoryName,\r\n            categoryDescribe: this.categoryDescribe\r\n          }).then(resp => {\r\n            if (resp.status == 200) {\r\n              this.getCategories();\r\n              this.categoryId = -1;\r\n              this.categoryName = '';\r\n              this.categoryDescribe = '';\r\n              this.edit = false;\r\n            }\r\n          })\r\n\r\n        } else {\r\n          if (this.enableAdmin){\r\n            this.$message.error('管理员模式下无法添加分类哦');\r\n            this.categoryName = '';\r\n            this.categoryDescribe = '';\r\n            return false;\r\n          }\r\n          postRequest('/category/', {\r\n            categoryName: this.categoryName,\r\n            categoryDescribe: this.categoryDescribe\r\n          }).then(resp => {\r\n            if (resp.status == 200) {\r\n              this.getCategories();\r\n              this.categoryName = '';\r\n              this.categoryDescribe = '';\r\n            }\r\n          })\r\n        }\r\n      },\r\n\r\n\r\n      handleEdit(index, row) {\r\n        this.categoryId = row.categoryId;\r\n        this.categoryName = row.categoryName;\r\n        this.categoryDescribe = row.categoryDescribe;\r\n        this.edit = true;\r\n      },\r\n\r\n      handleCancer() {\r\n        this.categoryId = -1;\r\n        this.categoryName = '';\r\n        this.categoryDescribe = '';\r\n        this.edit = false;\r\n      },\r\n\r\n      handleDelete(index, row) {\r\n        this.$confirm('删除此分类，是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          deleteRequest('/category/', {\r\n            categoryId: row.categoryId\r\n          }).then(resp => {\r\n            if (resp.status == 200) {\r\n              this.getCategories();\r\n            }\r\n          })\r\n        })\r\n      }\r\n    }\r\n\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .container-self {\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n    background-color: #fff;\r\n    width: 100%;\r\n    border-radius: 6px;\r\n  }\r\n\r\n  .form-header {\r\n    padding: 12px 30px;\r\n    border-bottom: 1px solid #d0d0d0;\r\n  }\r\n\r\n  .form-body {\r\n    padding: 20px 30px 40px 30px;\r\n  }\r\n\r\n  .pText {\r\n    margin: 25px 0px;\r\n    font-size: 14px;\r\n  }\r\n\r\n  .select-self {\r\n    margin-left: 30px;\r\n    height: 100%;\r\n    width: 150px;\r\n  }\r\n</style>\r\n"]}]}