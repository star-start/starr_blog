{"remainingRequest":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\article\\Writing.vue?vue&type=style&index=0&id=711543da&scoped=true&lang=css&","dependencies":[{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\article\\Writing.vue","mtime":1672399210833},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\css-loader\\dist\\cjs.js","mtime":1672420949353},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1672420953476},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\postcss-loader\\src\\index.js","mtime":1672420950940},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672420947809},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js","mtime":1672420951796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWRpdG9yLWJ0biB7CiAgbWFyZ2luLXRvcDogMjVweDsKICBmb250LXNpemU6IDE0cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouYnV0dG9uLXNlbGYgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBsZWZ0OiA4OSU7Cn0KCi5pbnB1dC1kIHsKICB3aWR0aDogMzAwcHg7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5tciB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9Cgouc2VsZWN0aW9uIHsKICB3aWR0aDogMTUwcHg7Cn0KCi5oZWFkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMzBweDsKICBwYWRkaW5nOiAwIDEwcHg7CiAgYm9yZGVyLWxlZnQ6IDEwcHggc29saWQgI2EzYmU4YzsKICBmb250LXNpemU6IDEycHg7CiAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgY29sb3I6ICNlZmYxZjU7CiAgYmFja2dyb3VuZDogIzM0M2Q0NjsKICBvdmVyZmxvdzogaGlkZGVuOwp9CgouZHJhd2VyLWJveCB7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHJnYmEoMjA4LCAyMDgsIDIwOCwgMC45MSk7CiAgbWFyZ2luOiAwcHg7Cn0KCgouZWwtdGFnICsgLmVsLXRhZyB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KCi5idXR0b24tbmV3LXRhZyB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgaGVpZ2h0OiAzMnB4OwogIGxpbmUtaGVpZ2h0OiAzMHB4OwogIHBhZGRpbmctdG9wOiAwOwogIHBhZGRpbmctYm90dG9tOiAwOwp9CgouaW5wdXQtbmV3LXRhZyB7CiAgd2lkdGg6IDkwcHg7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KCgouZm9vdGVyIHsKICBtYXJnaW4tdG9wOiAyNSU7CiAgd2lkdGg6IDEwMCU7Cn0KCi5mb290ZXItYm9keSB7CiAgZmxvYXQ6IHJpZ2h0Owp9CgoucFRleHQgewogIG1hcmdpbjogMjVweCAwcHg7CiAgZm9udC1zaXplOiAxNHB4Owp9CgouZHJhd2VyLWJvZHkgewogIG1hcmdpbjogMHB4OwogIHBhZGRpbmc6IDBweCAyMHB4IDBweCAyMHB4Owp9Cg=="},{"version":3,"sources":["Writing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsRA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Writing.vue","sourceRoot":"src/view/manage/article","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\" v-loading=\"loading\">\r\n      <el-input class=\"input-d mr\" v-model=\"title\" placeholder=\"请输入标题名称*\"></el-input>\r\n      <el-select v-model=\"categoryId\" placeholder=\"选择分类*\" class=\"selection mr\">\r\n        <el-option\r\n                v-for=\"item in categories\"\r\n                :key=\"item.categoryId\" :label=\"item.categoryName\" :value=\"item.categoryId\">\r\n        </el-option>\r\n      </el-select>\r\n      <el-tag\r\n              size=\"medium\"\r\n              :key=\"tag\"\r\n              v-for=\"tag in articleTags\"\r\n              closable\r\n              :disable-transitions=\"false\"\r\n              @close=\"handleClose(tag)\">\r\n        {{tag}}\r\n      </el-tag>\r\n      <el-input\r\n              class=\"input-new-tag \"\r\n              v-if=\"inputVisible\"\r\n              v-model=\"inputValue\"\r\n              ref=\"saveTagInput\"\r\n              size=\"small\"\r\n              @keyup.enter.native=\"handleInputConfirm\"\r\n              @blur=\"handleInputConfirm\"\r\n      >\r\n      </el-input>\r\n      <el-button type=\"primary\" v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ Tag</el-button>\r\n      <mavon-editor v-model=\"content\" ref=\"md\" @imgAdd=\"$imgAdd\" @change=\"change\" style=\"min-height: 600px\"/>\r\n      <el-button round class=\"editor-btn button-self\" @click=\"changeDrawer()\" type=\"warning\">\r\n        提交<i class=\"el-icon-arrow-right el-icon--right\"></i>\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-drawer size=\"34%\" title=\"文章设置\" :visible.sync=\"drawer\" direction=\"rtl\">\r\n      <div class=\"drawer-box\">\r\n        <div class=\"drawer-body\">\r\n          <p class=\"pText\">开启评论*：</p>\r\n          <el-radio-group v-model=\"enableComment\">\r\n            <el-radio :label=\"1\">允许</el-radio>\r\n            <el-radio :label=\"0\">禁止</el-radio>\r\n          </el-radio-group>\r\n\r\n          <p class=\"pText\">更新时间*：</p>\r\n          <el-date-picker\r\n                  v-model=\"updateTime\"\r\n                  type=\"datetime\"\r\n                  placeholder=\"请指定时间\"\r\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          >\r\n          </el-date-picker>\r\n\r\n          <el-divider></el-divider>\r\n          <p class=\"pText\">摘要：</p>\r\n          <el-input\r\n                  type=\"textarea\"\r\n                  :rows=\"5\"\r\n                  placeholder=\"请输入内容\"\r\n                  v-model=\"summary\"\r\n                  maxlength=\"150\"\r\n                  show-word-limit\r\n          >\r\n          </el-input>\r\n          <div class=\"footer\">\r\n            <div class=\"footer-body\">\r\n              <el-button size=\"small\" @click=\"saveArticle(2)\">存草稿</el-button>\r\n              <el-button size=\"small\" type=\"primary\" @click=\"saveArticle(1)\">发布</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { mavonEditor } from 'mavon-editor';\r\n  import 'mavon-editor/dist/css/index.css';\r\n\r\n  import { getRequest, postRequest, uploadFileRequest } from '@/axios';\r\n\r\n  export default {\r\n    name: 'Writing',\r\n    data: function() {\r\n      return {\r\n\r\n        articleId: -1,\r\n        title: '',\r\n        content: '',\r\n        html: '',\r\n        categoryId: '',\r\n        articleTags: [],\r\n        summary: '',\r\n        enableComment: 1,\r\n        createTime: '',\r\n        updateTime: '',\r\n        status: -1,\r\n        stat: '',\r\n\r\n        categories: [],\r\n        initTime: '',\r\n\r\n        inputVisible: false,\r\n        inputValue: '',\r\n        drawer: false,\r\n\r\n        loading:false\r\n      };\r\n    },\r\n    components: {\r\n      mavonEditor\r\n    },\r\n\r\n    created() {\r\n      this.edit();\r\n      this.getCategories();\r\n    },\r\n\r\n    computed: {\r\n      editArticleId() {\r\n        return this.$store.state.editArticleId;\r\n      }\r\n    },\r\n    watch: {\r\n      editArticleId() {\r\n        if (this.editArticleId != -1) {\r\n          this.edit();\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n\r\n      edit() {\r\n        if (this.editArticleId != -1) {\r\n          this.$message.warning('修改加载中...');\r\n          this.loading = true;\r\n          getRequest('/article/' + this.editArticleId).then(resp => {\r\n            if (resp.status == 200) {\r\n              this.loading = false;\r\n              const data = resp.data;\r\n              this.articleId = data.articleId;\r\n              this.title = data.title;\r\n              this.html = data.html;\r\n              this.content = data.content;\r\n              this.categoryId = data.categoryId;\r\n              this.articleTags = data.articleTags.length != 0 ? data.articleTags.split(',') : '';\r\n              this.createTime = data.createTime;\r\n              this.updateTime = data.updateTime;\r\n              this.summary = data.summary;\r\n              this.enableComment = data.enableComment;\r\n              this.status = data.status;\r\n            }\r\n          },err =>{\r\n            this.loading = false;\r\n          }).catch(err => {\r\n            this.loading = false;\r\n          });\r\n          this.$store.commit('edit', -1);\r\n        }\r\n      },\r\n\r\n\r\n      getCategories() {\r\n        getRequest('/category/all').then(resp => {\r\n          if (resp.status == 200) {\r\n            this.categories = resp.data.list;\r\n          }\r\n        })\r\n      },\r\n\r\n      // 将图片上传到服务器，返回地址替换到md中\r\n      $imgAdd(pos, $file) {\r\n        this.$message.warning('上传图片中');\r\n        var formdata = new FormData();\r\n        formdata.append('file', $file);\r\n        uploadFileRequest('/article/uploadImage', formdata).then(resp => {\r\n          if (resp.status == 200 && resp.data.status == 'success') {\r\n            this.$message.success('上传成功');\r\n            this.$refs.md.$img2Url(pos, resp.data.msg);\r\n          }\r\n        })\r\n      },\r\n\r\n\r\n      change(value, render) {\r\n        // render 为 markdown 解析后的结果\r\n        this.html = render;\r\n      },\r\n\r\n      //抽屉设置\r\n      changeDrawer() {\r\n        this.drawer = true;\r\n      },\r\n\r\n      handleClose(tag) {\r\n        this.articleTags.splice(this.articleTags.indexOf(tag), 1);\r\n      },\r\n\r\n      showInput() {\r\n        this.inputVisible = true;\r\n        this.$nextTick(_ => {\r\n          this.$refs.saveTagInput.$refs.input.focus();\r\n        });\r\n      },\r\n\r\n      handleInputConfirm() {\r\n        let inputValue = this.inputValue;\r\n        if (inputValue) {\r\n          this.articleTags.push(inputValue);\r\n        }\r\n        this.inputVisible = false;\r\n        this.inputValue = '';\r\n      },\r\n\r\n\r\n      saveArticle(stat) {\r\n        this.$confirm(stat != 1 ? '保存草稿，是否继续?' : '发布该文章 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          if (stat == 2 && this.status == 1) {\r\n            this.$message.error('已发布文章不可再存草稿箱哦');\r\n            return;\r\n          }\r\n          this.stat = stat;\r\n          this.$message.warning((stat == 2) ? '保存中...' : '发布中...');\r\n          this.loading =true;\r\n          postRequest('/article/', {\r\n            articleId: this.articleId,\r\n            title: this.title,\r\n            content: this.content,\r\n            html: this.html,\r\n            categoryId: this.categoryId,\r\n            articleTags: this.articleTags.join(),\r\n            enableComment: this.enableComment,\r\n            createTime: this.createTime,\r\n            updateTime: this.updateTime,\r\n            summary: this.summary,\r\n            status: this.status,\r\n            stat: this.stat\r\n          }).then(resp => {\r\n            this.loading = false;\r\n            if (resp.status == 200 && resp.data.status == 'success') {\r\n              this.drawer = false;\r\n              this.$router.push('/manage/article');\r\n              this.$store.commit('refresh', 1);\r\n              this.articleId = -1;\r\n              this.title = '';\r\n              this.content = '';\r\n              this.html = '';\r\n              this.categoryId = '';\r\n              this.articleTags = [];\r\n              this.summary = '';\r\n              this.enableComment = 1;\r\n              this.createTime = '';\r\n              this.updateTime = '';\r\n              this.status = -1;\r\n              this.stat = '';\r\n            }\r\n          },err => {\r\n            this.loading = false;\r\n          }).catch(err=> {\r\n            this.loading = false;\r\n          });\r\n        }).catch(() => {\r\n        });\r\n      }\r\n    }\r\n\r\n\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .editor-btn {\r\n    margin-top: 25px;\r\n    font-size: 14px;\r\n    text-align: center;\r\n  }\r\n\r\n  .button-self {\r\n    position: relative;\r\n    left: 89%;\r\n  }\r\n\r\n  .input-d {\r\n    width: 300px;\r\n    margin-bottom: 20px;\r\n    display: inline-block;\r\n  }\r\n\r\n  .mr {\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .selection {\r\n    width: 150px;\r\n  }\r\n\r\n  .header {\r\n    width: 100%;\r\n    height: 30px;\r\n    padding: 0 10px;\r\n    border-left: 10px solid #a3be8c;\r\n    font-size: 12px;\r\n    line-height: 30px;\r\n    color: #eff1f5;\r\n    background: #343d46;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .drawer-box {\r\n    border-top: 1px solid rgba(208, 208, 208, 0.91);\r\n    margin: 0px;\r\n  }\r\n\r\n\r\n  .el-tag + .el-tag {\r\n    margin-left: 10px;\r\n  }\r\n\r\n  .button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n\r\n  .input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n  }\r\n\r\n\r\n  .footer {\r\n    margin-top: 25%;\r\n    width: 100%;\r\n  }\r\n\r\n  .footer-body {\r\n    float: right;\r\n  }\r\n\r\n  .pText {\r\n    margin: 25px 0px;\r\n    font-size: 14px;\r\n  }\r\n\r\n  .drawer-body {\r\n    margin: 0px;\r\n    padding: 0px 20px 0px 20px;\r\n  }\r\n</style>\r\n"]}]}