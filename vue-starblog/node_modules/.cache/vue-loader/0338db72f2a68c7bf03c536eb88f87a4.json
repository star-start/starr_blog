{"remainingRequest":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\article\\Writing.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\src\\view\\manage\\article\\Writing.vue","mtime":1672399210833},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672420947809},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\babel-loader\\lib\\index.js","mtime":1672420951357},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672420947809},{"path":"F:\\Spring Boot\\STAR-BLOG\\vue-starblog\\node_modules\\vue-loader\\lib\\index.js","mtime":1672420951796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hdm9uRWRpdG9yIH0gZnJvbSAnbWF2b24tZWRpdG9yJzsKaW1wb3J0ICdtYXZvbi1lZGl0b3IvZGlzdC9jc3MvaW5kZXguY3NzJzsKCmltcG9ydCB7IGdldFJlcXVlc3QsIHBvc3RSZXF1ZXN0LCB1cGxvYWRGaWxlUmVxdWVzdCB9IGZyb20gJ0AvYXhpb3MnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdXcml0aW5nJywKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CgogICAgICBhcnRpY2xlSWQ6IC0xLAogICAgICB0aXRsZTogJycsCiAgICAgIGNvbnRlbnQ6ICcnLAogICAgICBodG1sOiAnJywKICAgICAgY2F0ZWdvcnlJZDogJycsCiAgICAgIGFydGljbGVUYWdzOiBbXSwKICAgICAgc3VtbWFyeTogJycsCiAgICAgIGVuYWJsZUNvbW1lbnQ6IDEsCiAgICAgIGNyZWF0ZVRpbWU6ICcnLAogICAgICB1cGRhdGVUaW1lOiAnJywKICAgICAgc3RhdHVzOiAtMSwKICAgICAgc3RhdDogJycsCgogICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgaW5pdFRpbWU6ICcnLAoKICAgICAgaW5wdXRWaXNpYmxlOiBmYWxzZSwKICAgICAgaW5wdXRWYWx1ZTogJycsCiAgICAgIGRyYXdlcjogZmFsc2UsCgogICAgICBsb2FkaW5nOmZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgbWF2b25FZGl0b3IKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5lZGl0KCk7CiAgICB0aGlzLmdldENhdGVnb3JpZXMoKTsKICB9LAoKICBjb21wdXRlZDogewogICAgZWRpdEFydGljbGVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmVkaXRBcnRpY2xlSWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZWRpdEFydGljbGVJZCgpIHsKICAgICAgaWYgKHRoaXMuZWRpdEFydGljbGVJZCAhPSAtMSkgewogICAgICAgIHRoaXMuZWRpdCgpOwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIGVkaXQoKSB7CiAgICAgIGlmICh0aGlzLmVkaXRBcnRpY2xlSWQgIT0gLTEpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+S/ruaUueWKoOi9veS4rS4uLicpOwogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgZ2V0UmVxdWVzdCgnL2FydGljbGUvJyArIHRoaXMuZWRpdEFydGljbGVJZCkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwLmRhdGE7CiAgICAgICAgICAgIHRoaXMuYXJ0aWNsZUlkID0gZGF0YS5hcnRpY2xlSWQ7CiAgICAgICAgICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICAgICAgICB0aGlzLmh0bWwgPSBkYXRhLmh0bWw7CiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IGRhdGEuY29udGVudDsKICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUlkID0gZGF0YS5jYXRlZ29yeUlkOwogICAgICAgICAgICB0aGlzLmFydGljbGVUYWdzID0gZGF0YS5hcnRpY2xlVGFncy5sZW5ndGggIT0gMCA/IGRhdGEuYXJ0aWNsZVRhZ3Muc3BsaXQoJywnKSA6ICcnOwogICAgICAgICAgICB0aGlzLmNyZWF0ZVRpbWUgPSBkYXRhLmNyZWF0ZVRpbWU7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZSA9IGRhdGEudXBkYXRlVGltZTsKICAgICAgICAgICAgdGhpcy5zdW1tYXJ5ID0gZGF0YS5zdW1tYXJ5OwogICAgICAgICAgICB0aGlzLmVuYWJsZUNvbW1lbnQgPSBkYXRhLmVuYWJsZUNvbW1lbnQ7CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZGF0YS5zdGF0dXM7CiAgICAgICAgICB9CiAgICAgICAgfSxlcnIgPT57CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0JywgLTEpOwogICAgICB9CiAgICB9LAoKCiAgICBnZXRDYXRlZ29yaWVzKCkgewogICAgICBnZXRSZXF1ZXN0KCcvY2F0ZWdvcnkvYWxsJykudGhlbihyZXNwID0+IHsKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSByZXNwLmRhdGEubGlzdDsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOWwhuWbvueJh+S4iuS8oOWIsOacjeWKoeWZqO+8jOi/lOWbnuWcsOWdgOabv+aNouWIsG1k5LitCiAgICAkaW1nQWRkKHBvcywgJGZpbGUpIHsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfkuIrkvKDlm77niYfkuK0nKTsKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnZmlsZScsICRmaWxlKTsKICAgICAgdXBsb2FkRmlsZVJlcXVlc3QoJy9hcnRpY2xlL3VwbG9hZEltYWdlJywgZm9ybWRhdGEpLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDIwMCAmJiByZXNwLmRhdGEuc3RhdHVzID09ICdzdWNjZXNzJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkuIrkvKDmiJDlip8nKTsKICAgICAgICAgIHRoaXMuJHJlZnMubWQuJGltZzJVcmwocG9zLCByZXNwLmRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKCiAgICBjaGFuZ2UodmFsdWUsIHJlbmRlcikgewogICAgICAvLyByZW5kZXIg5Li6IG1hcmtkb3duIOino+aekOWQjueahOe7k+aenAogICAgICB0aGlzLmh0bWwgPSByZW5kZXI7CiAgICB9LAoKICAgIC8v5oq95bGJ6K6+572uCiAgICBjaGFuZ2VEcmF3ZXIoKSB7CiAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZTsKICAgIH0sCgogICAgaGFuZGxlQ2xvc2UodGFnKSB7CiAgICAgIHRoaXMuYXJ0aWNsZVRhZ3Muc3BsaWNlKHRoaXMuYXJ0aWNsZVRhZ3MuaW5kZXhPZih0YWcpLCAxKTsKICAgIH0sCgogICAgc2hvd0lucHV0KCkgewogICAgICB0aGlzLmlucHV0VmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKF8gPT4gewogICAgICAgIHRoaXMuJHJlZnMuc2F2ZVRhZ0lucHV0LiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVJbnB1dENvbmZpcm0oKSB7CiAgICAgIGxldCBpbnB1dFZhbHVlID0gdGhpcy5pbnB1dFZhbHVlOwogICAgICBpZiAoaW5wdXRWYWx1ZSkgewogICAgICAgIHRoaXMuYXJ0aWNsZVRhZ3MucHVzaChpbnB1dFZhbHVlKTsKICAgICAgfQogICAgICB0aGlzLmlucHV0VmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmlucHV0VmFsdWUgPSAnJzsKICAgIH0sCgoKICAgIHNhdmVBcnRpY2xlKHN0YXQpIHsKICAgICAgdGhpcy4kY29uZmlybShzdGF0ICE9IDEgPyAn5L+d5a2Y6I2J56i/77yM5piv5ZCm57un57utPycgOiAn5Y+R5biD6K+l5paH56ugIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgaWYgKHN0YXQgPT0gMiAmJiB0aGlzLnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflt7Llj5HluIPmlofnq6DkuI3lj6/lho3lrZjojYnnqL/nrrHlk6YnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdGF0ID0gc3RhdDsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoKHN0YXQgPT0gMikgPyAn5L+d5a2Y5LitLi4uJyA6ICflj5HluIPkuK0uLi4nKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPXRydWU7CiAgICAgICAgcG9zdFJlcXVlc3QoJy9hcnRpY2xlLycsIHsKICAgICAgICAgIGFydGljbGVJZDogdGhpcy5hcnRpY2xlSWQsCiAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICAgIGh0bWw6IHRoaXMuaHRtbCwKICAgICAgICAgIGNhdGVnb3J5SWQ6IHRoaXMuY2F0ZWdvcnlJZCwKICAgICAgICAgIGFydGljbGVUYWdzOiB0aGlzLmFydGljbGVUYWdzLmpvaW4oKSwKICAgICAgICAgIGVuYWJsZUNvbW1lbnQ6IHRoaXMuZW5hYmxlQ29tbWVudCwKICAgICAgICAgIGNyZWF0ZVRpbWU6IHRoaXMuY3JlYXRlVGltZSwKICAgICAgICAgIHVwZGF0ZVRpbWU6IHRoaXMudXBkYXRlVGltZSwKICAgICAgICAgIHN1bW1hcnk6IHRoaXMuc3VtbWFyeSwKICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsCiAgICAgICAgICBzdGF0OiB0aGlzLnN0YXQKICAgICAgICB9KS50aGVuKHJlc3AgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMjAwICYmIHJlc3AuZGF0YS5zdGF0dXMgPT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgIHRoaXMuZHJhd2VyID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbWFuYWdlL2FydGljbGUnKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdyZWZyZXNoJywgMSk7CiAgICAgICAgICAgIHRoaXMuYXJ0aWNsZUlkID0gLTE7CiAgICAgICAgICAgIHRoaXMudGl0bGUgPSAnJzsKICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gJyc7CiAgICAgICAgICAgIHRoaXMuaHRtbCA9ICcnOwogICAgICAgICAgICB0aGlzLmNhdGVnb3J5SWQgPSAnJzsKICAgICAgICAgICAgdGhpcy5hcnRpY2xlVGFncyA9IFtdOwogICAgICAgICAgICB0aGlzLnN1bW1hcnkgPSAnJzsKICAgICAgICAgICAgdGhpcy5lbmFibGVDb21tZW50ID0gMTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVUaW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZSA9ICcnOwogICAgICAgICAgICB0aGlzLnN0YXR1cyA9IC0xOwogICAgICAgICAgICB0aGlzLnN0YXQgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9LGVyciA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KS5jYXRjaChlcnI9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICB9KTsKICAgIH0KICB9CgoKfTsK"},{"version":3,"sources":["Writing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"Writing.vue","sourceRoot":"src/view/manage/article","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\" v-loading=\"loading\">\r\n      <el-input class=\"input-d mr\" v-model=\"title\" placeholder=\"请输入标题名称*\"></el-input>\r\n      <el-select v-model=\"categoryId\" placeholder=\"选择分类*\" class=\"selection mr\">\r\n        <el-option\r\n                v-for=\"item in categories\"\r\n                :key=\"item.categoryId\" :label=\"item.categoryName\" :value=\"item.categoryId\">\r\n        </el-option>\r\n      </el-select>\r\n      <el-tag\r\n              size=\"medium\"\r\n              :key=\"tag\"\r\n              v-for=\"tag in articleTags\"\r\n              closable\r\n              :disable-transitions=\"false\"\r\n              @close=\"handleClose(tag)\">\r\n        {{tag}}\r\n      </el-tag>\r\n      <el-input\r\n              class=\"input-new-tag \"\r\n              v-if=\"inputVisible\"\r\n              v-model=\"inputValue\"\r\n              ref=\"saveTagInput\"\r\n              size=\"small\"\r\n              @keyup.enter.native=\"handleInputConfirm\"\r\n              @blur=\"handleInputConfirm\"\r\n      >\r\n      </el-input>\r\n      <el-button type=\"primary\" v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ Tag</el-button>\r\n      <mavon-editor v-model=\"content\" ref=\"md\" @imgAdd=\"$imgAdd\" @change=\"change\" style=\"min-height: 600px\"/>\r\n      <el-button round class=\"editor-btn button-self\" @click=\"changeDrawer()\" type=\"warning\">\r\n        提交<i class=\"el-icon-arrow-right el-icon--right\"></i>\r\n      </el-button>\r\n    </div>\r\n\r\n    <el-drawer size=\"34%\" title=\"文章设置\" :visible.sync=\"drawer\" direction=\"rtl\">\r\n      <div class=\"drawer-box\">\r\n        <div class=\"drawer-body\">\r\n          <p class=\"pText\">开启评论*：</p>\r\n          <el-radio-group v-model=\"enableComment\">\r\n            <el-radio :label=\"1\">允许</el-radio>\r\n            <el-radio :label=\"0\">禁止</el-radio>\r\n          </el-radio-group>\r\n\r\n          <p class=\"pText\">更新时间*：</p>\r\n          <el-date-picker\r\n                  v-model=\"updateTime\"\r\n                  type=\"datetime\"\r\n                  placeholder=\"请指定时间\"\r\n                  value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          >\r\n          </el-date-picker>\r\n\r\n          <el-divider></el-divider>\r\n          <p class=\"pText\">摘要：</p>\r\n          <el-input\r\n                  type=\"textarea\"\r\n                  :rows=\"5\"\r\n                  placeholder=\"请输入内容\"\r\n                  v-model=\"summary\"\r\n                  maxlength=\"150\"\r\n                  show-word-limit\r\n          >\r\n          </el-input>\r\n          <div class=\"footer\">\r\n            <div class=\"footer-body\">\r\n              <el-button size=\"small\" @click=\"saveArticle(2)\">存草稿</el-button>\r\n              <el-button size=\"small\" type=\"primary\" @click=\"saveArticle(1)\">发布</el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { mavonEditor } from 'mavon-editor';\r\n  import 'mavon-editor/dist/css/index.css';\r\n\r\n  import { getRequest, postRequest, uploadFileRequest } from '@/axios';\r\n\r\n  export default {\r\n    name: 'Writing',\r\n    data: function() {\r\n      return {\r\n\r\n        articleId: -1,\r\n        title: '',\r\n        content: '',\r\n        html: '',\r\n        categoryId: '',\r\n        articleTags: [],\r\n        summary: '',\r\n        enableComment: 1,\r\n        createTime: '',\r\n        updateTime: '',\r\n        status: -1,\r\n        stat: '',\r\n\r\n        categories: [],\r\n        initTime: '',\r\n\r\n        inputVisible: false,\r\n        inputValue: '',\r\n        drawer: false,\r\n\r\n        loading:false\r\n      };\r\n    },\r\n    components: {\r\n      mavonEditor\r\n    },\r\n\r\n    created() {\r\n      this.edit();\r\n      this.getCategories();\r\n    },\r\n\r\n    computed: {\r\n      editArticleId() {\r\n        return this.$store.state.editArticleId;\r\n      }\r\n    },\r\n    watch: {\r\n      editArticleId() {\r\n        if (this.editArticleId != -1) {\r\n          this.edit();\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n\r\n      edit() {\r\n        if (this.editArticleId != -1) {\r\n          this.$message.warning('修改加载中...');\r\n          this.loading = true;\r\n          getRequest('/article/' + this.editArticleId).then(resp => {\r\n            if (resp.status == 200) {\r\n              this.loading = false;\r\n              const data = resp.data;\r\n              this.articleId = data.articleId;\r\n              this.title = data.title;\r\n              this.html = data.html;\r\n              this.content = data.content;\r\n              this.categoryId = data.categoryId;\r\n              this.articleTags = data.articleTags.length != 0 ? data.articleTags.split(',') : '';\r\n              this.createTime = data.createTime;\r\n              this.updateTime = data.updateTime;\r\n              this.summary = data.summary;\r\n              this.enableComment = data.enableComment;\r\n              this.status = data.status;\r\n            }\r\n          },err =>{\r\n            this.loading = false;\r\n          }).catch(err => {\r\n            this.loading = false;\r\n          });\r\n          this.$store.commit('edit', -1);\r\n        }\r\n      },\r\n\r\n\r\n      getCategories() {\r\n        getRequest('/category/all').then(resp => {\r\n          if (resp.status == 200) {\r\n            this.categories = resp.data.list;\r\n          }\r\n        })\r\n      },\r\n\r\n      // 将图片上传到服务器，返回地址替换到md中\r\n      $imgAdd(pos, $file) {\r\n        this.$message.warning('上传图片中');\r\n        var formdata = new FormData();\r\n        formdata.append('file', $file);\r\n        uploadFileRequest('/article/uploadImage', formdata).then(resp => {\r\n          if (resp.status == 200 && resp.data.status == 'success') {\r\n            this.$message.success('上传成功');\r\n            this.$refs.md.$img2Url(pos, resp.data.msg);\r\n          }\r\n        })\r\n      },\r\n\r\n\r\n      change(value, render) {\r\n        // render 为 markdown 解析后的结果\r\n        this.html = render;\r\n      },\r\n\r\n      //抽屉设置\r\n      changeDrawer() {\r\n        this.drawer = true;\r\n      },\r\n\r\n      handleClose(tag) {\r\n        this.articleTags.splice(this.articleTags.indexOf(tag), 1);\r\n      },\r\n\r\n      showInput() {\r\n        this.inputVisible = true;\r\n        this.$nextTick(_ => {\r\n          this.$refs.saveTagInput.$refs.input.focus();\r\n        });\r\n      },\r\n\r\n      handleInputConfirm() {\r\n        let inputValue = this.inputValue;\r\n        if (inputValue) {\r\n          this.articleTags.push(inputValue);\r\n        }\r\n        this.inputVisible = false;\r\n        this.inputValue = '';\r\n      },\r\n\r\n\r\n      saveArticle(stat) {\r\n        this.$confirm(stat != 1 ? '保存草稿，是否继续?' : '发布该文章 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          if (stat == 2 && this.status == 1) {\r\n            this.$message.error('已发布文章不可再存草稿箱哦');\r\n            return;\r\n          }\r\n          this.stat = stat;\r\n          this.$message.warning((stat == 2) ? '保存中...' : '发布中...');\r\n          this.loading =true;\r\n          postRequest('/article/', {\r\n            articleId: this.articleId,\r\n            title: this.title,\r\n            content: this.content,\r\n            html: this.html,\r\n            categoryId: this.categoryId,\r\n            articleTags: this.articleTags.join(),\r\n            enableComment: this.enableComment,\r\n            createTime: this.createTime,\r\n            updateTime: this.updateTime,\r\n            summary: this.summary,\r\n            status: this.status,\r\n            stat: this.stat\r\n          }).then(resp => {\r\n            this.loading = false;\r\n            if (resp.status == 200 && resp.data.status == 'success') {\r\n              this.drawer = false;\r\n              this.$router.push('/manage/article');\r\n              this.$store.commit('refresh', 1);\r\n              this.articleId = -1;\r\n              this.title = '';\r\n              this.content = '';\r\n              this.html = '';\r\n              this.categoryId = '';\r\n              this.articleTags = [];\r\n              this.summary = '';\r\n              this.enableComment = 1;\r\n              this.createTime = '';\r\n              this.updateTime = '';\r\n              this.status = -1;\r\n              this.stat = '';\r\n            }\r\n          },err => {\r\n            this.loading = false;\r\n          }).catch(err=> {\r\n            this.loading = false;\r\n          });\r\n        }).catch(() => {\r\n        });\r\n      }\r\n    }\r\n\r\n\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .editor-btn {\r\n    margin-top: 25px;\r\n    font-size: 14px;\r\n    text-align: center;\r\n  }\r\n\r\n  .button-self {\r\n    position: relative;\r\n    left: 89%;\r\n  }\r\n\r\n  .input-d {\r\n    width: 300px;\r\n    margin-bottom: 20px;\r\n    display: inline-block;\r\n  }\r\n\r\n  .mr {\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .selection {\r\n    width: 150px;\r\n  }\r\n\r\n  .header {\r\n    width: 100%;\r\n    height: 30px;\r\n    padding: 0 10px;\r\n    border-left: 10px solid #a3be8c;\r\n    font-size: 12px;\r\n    line-height: 30px;\r\n    color: #eff1f5;\r\n    background: #343d46;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .drawer-box {\r\n    border-top: 1px solid rgba(208, 208, 208, 0.91);\r\n    margin: 0px;\r\n  }\r\n\r\n\r\n  .el-tag + .el-tag {\r\n    margin-left: 10px;\r\n  }\r\n\r\n  .button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n\r\n  .input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n  }\r\n\r\n\r\n  .footer {\r\n    margin-top: 25%;\r\n    width: 100%;\r\n  }\r\n\r\n  .footer-body {\r\n    float: right;\r\n  }\r\n\r\n  .pText {\r\n    margin: 25px 0px;\r\n    font-size: 14px;\r\n  }\r\n\r\n  .drawer-body {\r\n    margin: 0px;\r\n    padding: 0px 20px 0px 20px;\r\n  }\r\n</style>\r\n"]}]}